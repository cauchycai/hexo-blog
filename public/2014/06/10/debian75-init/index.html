<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Debian 7.5 Initialize | 追客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/app.css">
  <!-- <link rel='stylesheet' href='http://fonts.useso.com/css?family=Source+Code+Pro'> -->
</head>

<body>
  <nav class="app-nav">
  
    
      <a href="/.">home</a>
    
  
    
      <a href="/archives">archive</a>
    
  
    
      <a href="/about">about</a>
    
  
    
      <a href="/atom.xml">rss</a>
    
  
</nav>

  <main class="post">
  <article>
  <h1 class="article-title">
    <a href="/2014/06/10/debian75-init/">Debian 7.5 Initialize</a>
  </h1>

  <section class="article-meta">
    <p class="article-date">June 10 2014</p>
  </section>

  <section class="article-entry">
    <h3 id="Initialize"><a href="#Initialize" class="headerlink" title="Initialize"></a>Initialize</h3><h4 id="Add-User"><a href="#Add-User" class="headerlink" title="Add User"></a>Add User</h4><pre><code># addgroup admin
# useradd -d /home/cauchy -s /bin/bash -m cauchy
# passwd cauchy
# usermod -a -G admin cauchy
# visudo
</code></pre><h4 id="Find-This-Line"><a href="#Find-This-Line" class="headerlink" title="Find This Line"></a>Find This Line</h4><pre><code>root ALL=(ALL:ALL) ALL 
after it add the following line
root ALL=(ALL:ALL) ALL cauchy ALL=(ALL) NOPASSWD: ALL 
</code></pre><h4 id="Login-as-cauchy"><a href="#Login-as-cauchy" class="headerlink" title="Login as cauchy"></a>Login as cauchy</h4><pre><code>$ sudo vi /etc/ssh/sshd_config
</code></pre><h4 id="Modify-Following-Content"><a href="#Modify-Following-Content" class="headerlink" title="Modify Following Content"></a>Modify Following Content</h4><pre><code>Protocol 2

PermitRootLogin no
PermitEmptyPasswords no
PasswordAuthentication no

RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

UseDNS no
AllowUsers cauchy
</code></pre><h4 id="Pubkey-Login"><a href="#Pubkey-Login" class="headerlink" title="Pubkey Login"></a>Pubkey Login</h4><pre><code>$ ssh -p12312 cauchy@cauchy.me &apos;mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys&apos; &lt; ~/.ssh/id_rsa.pub
</code></pre><h4 id="Login-to-cauchy-me-again"><a href="#Login-to-cauchy-me-again" class="headerlink" title="Login to cauchy.me again"></a>Login to cauchy.me again</h4><pre><code>$ sudo chmod 600 ~/.ssh/authorized_keys &amp;&amp; chmod 700 ~/.ssh/
</code></pre><h4 id="timezone-setup"><a href="#timezone-setup" class="headerlink" title="timezone setup"></a>timezone setup</h4><pre><code>$ tzselect
$ echo &quot;TZ=&apos;Asia/Shanghai&apos;; export TZ&quot; &gt;&gt; ~/.profile
$ . ~/.profile
$ sudo apt-get update
$ sudo apt-get upgrade
</code></pre><h3 id="Install-Dropbox"><a href="#Install-Dropbox" class="headerlink" title="Install Dropbox"></a>Install Dropbox</h3><pre><code>$ cd ~ &amp;&amp; wget -O - &quot;https://www.dropbox.com/download?plat=lnx.x86_64&quot; | tar xzf -
$ mkdir -p ~/bin &amp;&amp; wget -O ~/bin/dropbox.py &quot;https://www.dropbox.com/download?dl=packages/dropbox.py&quot;
</code></pre><h3 id="Install-nginx"><a href="#Install-nginx" class="headerlink" title="Install nginx"></a>Install nginx</h3><h4 id="From-Repositories"><a href="#From-Repositories" class="headerlink" title="From Repositories"></a>From Repositories</h4><pre><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install nginx
</code></pre><h4 id="From-Source-Distribution"><a href="#From-Source-Distribution" class="headerlink" title="From Source Distribution"></a>From Source Distribution</h4><pre><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install libpcre3-dev build-essential libssl-dev
$ cd /opt/
$ sudo wget http://nginx.org/download/nginx-1.5.9.tar.gz
$ sudo tar -zxvf nginx-1.5.9.tar.gz
$ cd /opt/nginx-1.5.9/
$ sudo ./configure --prefix=/opt/nginx --user=nginx --group=nginx --with-http_ssl_module --with-ipv6
</code></pre><h5 id="You-should-see"><a href="#You-should-see" class="headerlink" title="You should see:"></a>You should see:</h5><pre><code>nginx path prefix: &quot;/opt/nginx&quot;
nginx binary file: &quot;/opt/nginx/sbin/nginx&quot;
nginx configuration prefix: &quot;/opt/nginx/conf&quot;
nginx configuration file: &quot;/opt/nginx/conf/nginx.conf&quot;
nginx pid file: &quot;/opt/nginx/logs/nginx.pid&quot;
nginx error log file: &quot;/opt/nginx/logs/error.log&quot;
nginx http access log file: &quot;/opt/nginx/logs/access.log&quot;
nginx http client request body temporary files: &quot;client_body_temp&quot;
nginx http proxy temporary files: &quot;proxy_temp&quot;
nginx http fastcgi temporary files: &quot;fastcgi_temp&quot;
nginx http uwsgi temporary files: &quot;uwsgi_temp&quot;
nginx http scgi temporary files: &quot;scgi_temp&quot;
</code></pre><h5 id="Then"><a href="#Then" class="headerlink" title="Then"></a>Then</h5><pre><code>$ sudo make
$ sudo make install
$ sudo adduser --system --no-create-home --disabled-login --disabled-password --group nginx
</code></pre><h4 id="Create-an-Init-Script-to-Manage-Nginx"><a href="#Create-an-Init-Script-to-Manage-Nginx" class="headerlink" title="Create an Init Script to Manage Nginx"></a>Create an Init Script to Manage Nginx</h4><pre><code>$ sudo wget -O init-deb.sh http://library.linode.com/assets/1538-init-deb.sh
$ sudo mv init-deb.sh /etc/init.d/nginx
$ sudo chmod +x /etc/init.d/nginx
$ sudo /usr/sbin/update-rc.d -f nginx defaults
</code></pre><h4 id="Edit-etc-init-d-nginx"><a href="#Edit-etc-init-d-nginx" class="headerlink" title="Edit /etc/init.d/nginx"></a>Edit /etc/init.d/nginx</h4><pre><code>DAEMON=/usr/sbin/nginx
</code></pre><h4 id="Edit-etc-nginx-nginx-conf"><a href="#Edit-etc-nginx-nginx-conf" class="headerlink" title="Edit /etc/nginx/nginx.conf"></a>Edit /etc/nginx/nginx.conf</h4><pre><code>user cauchy;
</code></pre><h4 id="Start-nginx"><a href="#Start-nginx" class="headerlink" title="Start nginx"></a>Start nginx</h4><pre><code>$ sudo service nginx start
</code></pre><h4 id="Add-www-folder"><a href="#Add-www-folder" class="headerlink" title="Add www folder"></a>Add www folder</h4><pre><code>$ sudo mkdir /var/www
$ sudo chown cauchy:cauchy /var/www
</code></pre><h4 id="Add-Virtual-Host-edit-etc-nginx-conf-d-vhosts-conf"><a href="#Add-Virtual-Host-edit-etc-nginx-conf-d-vhosts-conf" class="headerlink" title="Add Virtual Host, edit /etc/nginx/conf.d/vhosts.conf"></a>Add Virtual Host, edit /etc/nginx/conf.d/vhosts.conf</h4><pre><code>server {
    listen 80;
    server_name cauchy.com;
    index index.html;
    root /var/www/cauchycai.github.io;
}
</code></pre><h3 id="Install-jekyll"><a href="#Install-jekyll" class="headerlink" title="Install jekyll"></a>Install jekyll</h3><h4 id="install-gem"><a href="#install-gem" class="headerlink" title="install gem"></a>install gem</h4><h4 id="install-jekyll"><a href="#install-jekyll" class="headerlink" title="install jekyll"></a>install jekyll</h4><pre><code>$ sudo gem install jekyll
</code></pre><h3 id="github-config"><a href="#github-config" class="headerlink" title="github config"></a>github config</h3><h4 id="Install-git-client"><a href="#Install-git-client" class="headerlink" title="Install git client"></a>Install git client</h4><pre><code>$ sudo apt-get install git
$ git config --global user.email &quot;yourname@example.com&quot;
$ git config --global user.name &quot;Your Name&quot;
</code></pre><h4 id="Make-sure-ssh-id-rsa-pub-does-not-exist"><a href="#Make-sure-ssh-id-rsa-pub-does-not-exist" class="headerlink" title="Make sure .ssh/id_rsa.pub does not exist"></a>Make sure .ssh/id_rsa.pub does not exist</h4><pre><code>$ cd ~/.ssh
$ ls -al
</code></pre><h4 id="Generate-a-new-SSH-key"><a href="#Generate-a-new-SSH-key" class="headerlink" title="Generate a new SSH key"></a>Generate a new SSH key</h4><pre><code>$ ssh-keygen -t rsa -C &quot;yourname@example.com&quot;
</code></pre><h4 id="Copy-ssh-id-rsa-pub-to-github-and-test"><a href="#Copy-ssh-id-rsa-pub-to-github-and-test" class="headerlink" title="Copy .ssh/id_rsa.pub to github and test"></a>Copy .ssh/id_rsa.pub to github and test</h4><pre><code>$ ssh -T git@github.com
</code></pre>
  </section>
</article>

  <div class="sharing grid">
  <section class="profile grid-item grid">
    <img class="avatar" src="http://7xrcp8.com1.z0.glb.clouddn.com/avatar.png" alt="avatar" />
    <div class="grid-item">
      <p class="title"> 追客 </p>
      <p class="subtitle"> You are the JavaScript in my HTML </p>
    <div>
  </section>

  <section class="share-btns">
    <!-- <p> share it if you like it~ </p> -->
    <a
  class="twitter-share-button"
  data-size="large"
  data-via="DrakeLeung"
  href="https://twitter.com/intent/tweet?text= id="Initialize"><a "
>
  Tweet
</a>

<script>
  window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  js.async = true;
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
</script>

  </section>
</div>


  
    
<section class="article-comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

<script>
  var disqus_shortname = 'drakeleung';
  
  var disqus_url = 'http://www.cauchy.me/2014/06/10/debian75-init/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


  
</main>

</body>
</html>
