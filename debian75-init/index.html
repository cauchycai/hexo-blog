<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="om, linux">
    <meta name="author" content="Cauchy Cai">

    <title>Debian 7.5 Initialize &#8211; Thinking Aloud</title>

    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/css/blog.css" rel="stylesheet">
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Thinking Aloud Feed">
  </head>

  <body>

    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
          <a class="blog-nav-item active" href="">Home</a>
          
          <!--<a class="blog-nav-item" href="/about" >About</a>-->
          
        </nav>
      </div>
    </div> <!-- close .blog-masthead -->

    <div class="container">



     <div class="row">

        <div class="col-sm-8 blog-main">

          <div class="blog-post">
            <h2 class="blog-post-title">Debian 7.5 Initialize</h2>
            <p class="blog-post-meta">June 10, 2014</p>

            <h3 id="initialize">Initialize</h3>

<h4 id="add-user">Add User</h4>

<pre><code># addgroup admin
# useradd -d /home/cauchy -s /bin/bash -m cauchy
# passwd cauchy
# usermod -a -G admin cauchy
# visudo
</code></pre>

<h4 id="find-this-line">Find This Line</h4>

<pre><code>root ALL=(ALL:ALL) ALL 
after it add the following line
root ALL=(ALL:ALL) ALL cauchy ALL=(ALL) NOPASSWD: ALL 
</code></pre>

<h4 id="login-as-cauchy">Login as cauchy</h4>

<pre><code>$ sudo vi /etc/ssh/sshd_config
</code></pre>

<h4 id="modify-following-content">Modify Following Content</h4>

<pre><code>Protocol 2

PermitRootLogin no
PermitEmptyPasswords no
PasswordAuthentication no

RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

UseDNS no
AllowUsers cauchy
</code></pre>

<h4 id="pubkey-login">Pubkey Login</h4>

<pre><code>$ ssh -p12312 cauchy@cauchy.me 'mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys' &lt; ~/.ssh/id_rsa.pub
</code></pre>

<h4 id="login-to-cauchyme-again">Login to cauchy.me again</h4>

<pre><code>$ sudo chmod 600 ~/.ssh/authorized_keys &amp;&amp; chmod 700 ~/.ssh/
</code></pre>

<h4 id="timezone-setup">timezone setup</h4>

<pre><code>$ tzselect
$ echo "TZ='Asia/Shanghai'; export TZ" &gt;&gt; ~/.profile
$ . ~/.profile
$ sudo apt-get update
$ sudo apt-get upgrade
</code></pre>

<h3 id="install-dropbox">Install Dropbox</h3>
<pre><code>$ cd ~ &amp;&amp; wget -O - "https://www.dropbox.com/download?plat=lnx.x86_64" | tar xzf -
$ mkdir -p ~/bin &amp;&amp; wget -O ~/bin/dropbox.py "https://www.dropbox.com/download?dl=packages/dropbox.py"
</code></pre>

<h3 id="install-nginx">Install nginx</h3>

<h4 id="from-repositories">From Repositories</h4>

<pre><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install nginx
</code></pre>

<h4 id="from-source-distribution">From Source Distribution</h4>

<pre><code>$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install libpcre3-dev build-essential libssl-dev
$ cd /opt/
$ sudo wget http://nginx.org/download/nginx-1.5.9.tar.gz
$ sudo tar -zxvf nginx-1.5.9.tar.gz
$ cd /opt/nginx-1.5.9/
$ sudo ./configure --prefix=/opt/nginx --user=nginx --group=nginx --with-http_ssl_module --with-ipv6
</code></pre>

<h5 id="you-should-see">You should see:</h5>

<pre><code>nginx path prefix: "/opt/nginx"
nginx binary file: "/opt/nginx/sbin/nginx"
nginx configuration prefix: "/opt/nginx/conf"
nginx configuration file: "/opt/nginx/conf/nginx.conf"
nginx pid file: "/opt/nginx/logs/nginx.pid"
nginx error log file: "/opt/nginx/logs/error.log"
nginx http access log file: "/opt/nginx/logs/access.log"
nginx http client request body temporary files: "client_body_temp"
nginx http proxy temporary files: "proxy_temp"
nginx http fastcgi temporary files: "fastcgi_temp"
nginx http uwsgi temporary files: "uwsgi_temp"
nginx http scgi temporary files: "scgi_temp"
</code></pre>

<h5 id="then">Then</h5>

<pre><code>$ sudo make
$ sudo make install
$ sudo adduser --system --no-create-home --disabled-login --disabled-password --group nginx
</code></pre>

<h4 id="create-an-init-script-to-manage-nginx">Create an Init Script to Manage Nginx</h4>

<pre><code>$ sudo wget -O init-deb.sh http://library.linode.com/assets/1538-init-deb.sh
$ sudo mv init-deb.sh /etc/init.d/nginx
$ sudo chmod +x /etc/init.d/nginx
$ sudo /usr/sbin/update-rc.d -f nginx defaults
</code></pre>

<h4 id="edit-etcinitdnginx">Edit /etc/init.d/nginx</h4>

<pre><code>DAEMON=/usr/sbin/nginx
</code></pre>

<h4 id="edit-etcnginxnginxconf">Edit /etc/nginx/nginx.conf</h4>

<pre><code>user cauchy;
</code></pre>

<h4 id="start-nginx">Start nginx</h4>

<pre><code>$ sudo service nginx start
</code></pre>

<h4 id="add-www-folder">Add www folder</h4>

<pre><code>$ sudo mkdir /var/www
$ sudo chown cauchy:cauchy /var/www
</code></pre>

<h4 id="add-virtual-host-edit-etcnginxconfdvhostsconf">Add Virtual Host, edit /etc/nginx/conf.d/vhosts.conf</h4>

<pre><code>server {
    listen 80;
    server_name cauchy.com;
    index index.html;
    root /var/www/cauchycai.github.io;
}
</code></pre>

<h3 id="install-jekyll">Install jekyll</h3>

<h4 id="install-gem">install gem</h4>

<h4 id="install-jekyll-1">install jekyll</h4>

<pre><code>$ sudo gem install jekyll
</code></pre>

<h3 id="github-config">github config</h3>

<h4 id="install-git-client">Install git client</h4>

<pre><code>$ sudo apt-get install git
$ git config --global user.email "yourname@example.com"
$ git config --global user.name "Your Name"
</code></pre>

<h4 id="make-sure-sshidrsapub-does-not-exist">Make sure .ssh/id_rsa.pub does not exist</h4>

<pre><code>$ cd ~/.ssh
$ ls -al
</code></pre>

<h4 id="generate-a-new-ssh-key">Generate a new SSH key</h4>

<pre><code>$ ssh-keygen -t rsa -C "yourname@example.com"
</code></pre>

<h4 id="copy-sshidrsapub-to-github-and-test">Copy .ssh/id_rsa.pub to github and test</h4>

<pre><code>$ ssh -T git@github.com
</code></pre>



          </div>

       </div> <!-- close div.blog-main -->

       <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
            <h4>About</h4>
            <p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>
          </div>
          <!--<div class="sidebar-module">
            <h4>Archives</h4>
            <ol class="list-unstyled">
              <li><a href="#">March 2014</a></li>
              <li><a href="#">February 2014</a></li>
              <li><a href="#">January 2014</a></li>
              <li><a href="#">December 2013</a></li>
              <li><a href="#">November 2013</a></li>
              <li><a href="#">October 2013</a></li>
              <li><a href="#">September 2013</a></li>
              <li><a href="#">August 2013</a></li>
              <li><a href="#">July 2013</a></li>
              <li><a href="#">June 2013</a></li>
              <li><a href="#">May 2013</a></li>
              <li><a href="#">April 2013</a></li>
            </ol>
          </div>-->
          <div class="sidebar-module">
            <h4>Links</h4>
            <ol class="list-unstyled">
              <li><a href="https://github.com/cauchycai" target="_blank">GitHub</a></li>
              <li><a href="https://twitter.com/cauuuuchy" target="_blank">Twitter</a></li>
            </ol>
          </div>
        </div><!-- close div.blog-sidebar -->

      </div> <!-- close div.row -->


    <div class="blog-footer">
      <p>Cauchy 2014.</p>
      <p>
        <a href="javascript:window.scrollTo(0,0)">Back to top</a>
      </p>
    </div>

  </body>
</html>

